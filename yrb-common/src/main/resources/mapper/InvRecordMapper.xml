<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lixiang.ssm.dao.InvRecordMapper">
	<resultMap id="BaseResultMap" type="com.lixiang.ssm.entity.InvRecord">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed May 16 
			12:04:37 CST 2018. -->
		<constructor>
			<idArg column="id" javaType="java.lang.Integer" jdbcType="INTEGER" />
			<arg column="inv_rec_id" javaType="java.lang.Integer" jdbcType="INTEGER" />
			<arg column="invrec_no" javaType="java.lang.Integer" jdbcType="INTEGER" />
			<arg column="invrec_money" javaType="java.math.BigDecimal"
				jdbcType="DECIMAL" />
			<arg column="user_id" javaType="java.lang.Integer" jdbcType="INTEGER" />
			<arg column="inv_date" javaType="java.util.Date" jdbcType="TIMESTAMP" />
			<arg column="inv_user_name" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="inv_way" javaType="java.lang.Boolean" jdbcType="BIT" />
		</constructor>
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed May 16 
			12:04:37 CST 2018. -->
		id, inv_rec_id, invrec_no, invrec_money, user_id, inv_date,
		inv_user_name, inv_way
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.Integer"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed May 16 
			12:04:37 CST 2018. -->
		select
		<include refid="Base_Column_List" />
		from t_inv_record
		where id = #{id,jdbcType=INTEGER}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed May 16 
			12:04:37 CST 2018. -->
		delete from t_inv_record
		where id = #{id,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.lixiang.ssm.entity.InvRecord">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed May 16 
			12:04:37 CST 2018. -->
		insert into t_inv_record (id, inv_rec_id, invrec_no,
		invrec_money, user_id, inv_date,
		inv_user_name, inv_way)
		values (#{id,jdbcType=INTEGER}, #{invRecId,jdbcType=INTEGER},
		#{invrecNo,jdbcType=INTEGER},
		#{invrecMoney,jdbcType=DECIMAL}, #{userId,jdbcType=INTEGER}, #{invDate,jdbcType=TIMESTAMP},
		#{invUserName,jdbcType=VARCHAR}, #{invWay,jdbcType=BIT})
	</insert>
	<insert id="insertSelective" parameterType="com.lixiang.ssm.entity.InvRecord">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed May 16 
			12:04:37 CST 2018. -->
		insert into t_inv_record
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="invRecId != null">
				inv_rec_id,
			</if>
			<if test="invrecNo != null">
				invrec_no,
			</if>
			<if test="invrecMoney != null">
				invrec_money,
			</if>
			<if test="userId != null">
				user_id,
			</if>
			<if test="invDate != null">
				inv_date,
			</if>
			<if test="invUserName != null">
				inv_user_name,
			</if>
			<if test="invWay != null">
				inv_way,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="invRecId != null">
				#{invRecId,jdbcType=INTEGER},
			</if>
			<if test="invrecNo != null">
				#{invrecNo,jdbcType=INTEGER},
			</if>
			<if test="invrecMoney != null">
				#{invrecMoney,jdbcType=DECIMAL},
			</if>
			<if test="userId != null">
				#{userId,jdbcType=INTEGER},
			</if>
			<if test="invDate != null">
				#{invDate,jdbcType=TIMESTAMP},
			</if>
			<if test="invUserName != null">
				#{invUserName,jdbcType=VARCHAR},
			</if>
			<if test="invWay != null">
				#{invWay,jdbcType=BIT},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.lixiang.ssm.entity.InvRecord">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed May 16 
			12:04:37 CST 2018. -->
		update t_inv_record
		<set>
			<if test="invRecId != null">
				inv_rec_id = #{invRecId,jdbcType=INTEGER},
			</if>
			<if test="invrecNo != null">
				invrec_no = #{invrecNo,jdbcType=INTEGER},
			</if>
			<if test="invrecMoney != null">
				invrec_money = #{invrecMoney,jdbcType=DECIMAL},
			</if>
			<if test="userId != null">
				user_id = #{userId,jdbcType=INTEGER},
			</if>
			<if test="invDate != null">
				inv_date = #{invDate,jdbcType=TIMESTAMP},
			</if>
			<if test="invUserName != null">
				inv_user_name = #{invUserName,jdbcType=VARCHAR},
			</if>
			<if test="invWay != null">
				inv_way = #{invWay,jdbcType=BIT},
			</if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.lixiang.ssm.entity.InvRecord">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed May 16 
			12:04:37 CST 2018. -->
		update t_inv_record
		set inv_rec_id = #{invRecId,jdbcType=INTEGER},
		invrec_no = #{invrecNo,jdbcType=INTEGER},
		invrec_money = #{invrecMoney,jdbcType=DECIMAL},
		user_id = #{userId,jdbcType=INTEGER},
		inv_date = #{invDate,jdbcType=TIMESTAMP},
		inv_user_name = #{invUserName,jdbcType=VARCHAR},
		inv_way = #{invWay,jdbcType=BIT}
		where id = #{id,jdbcType=INTEGER}
	</update>
	<select id="selectInvestRecord" parameterType="java.lang.Integer" resultType="com.lixiang.ssm.entity.InvRecord">
		SELECT invr.inv_date,invp.project_name,invp.project_status,invr.invrec_money,
		SUM((invr.invrec_money*(1+invp.rate)/100 * pay.payback_no)-invr.invrec_money) interest  
		FROM t_inv_record invr,t_inv_project invp,t_payback_plan pay 
		WHERE invr.inv_pro_id = invp.id AND pay.inv_record_id = invr.id AND invr.user_id = #{userId}
	</select>
  
</mapper>